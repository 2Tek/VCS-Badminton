<div class="container">
  <div class="row">
    <!-- Existing cards for courts -->
    <div class="col-lg-3 col-md-4 col-sm-6 col-12" *ngFor="let court of courts">
      <div class="card my-3 court-card">
        <!-- Card Header -->
        <div class="card-header">
          <h5 class="card-title mb-0">
            Court ID: {{ court.id }} {{ court.name }}
          </h5>
          <p class="card-subtitle">
            Court No: {{ court.court_no }}, Level: {{ court.level }}, Max Players: {{ court.max_players }}
          </p>
          <p class="card-subtitle">Date & Time: {{ court.date }} - {{ court.time }}</p>
        </div>

        <!-- Card Body -->
        <div class="card-body">
          <h6 class="registrations-header">Registrations:</h6>
          <ul *ngIf="getRegistrationsForCourt(court.id).length > 0; else noRegistrations">
            <li
              *ngFor="let reg of getRegistrationsForCourt(court.id); let i = index"
              [ngClass]="{'player': reg.role === 'Player', 'waitlist': reg.role === 'Waitlist'}"
            >
              {{ i + 1 }}. {{ reg.name }} ({{ reg.role }})
            </li>
          </ul>
          <ng-template #noRegistrations>
            <div class="no-registrations">No registrations found for this court.</div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>

  <!-- Sidebar for Adding a New Court -->
  <div class="ios-sidebar" [class.open]="isSidebarOpen">
    <div class="ios-sidebar-header">
      <h5>Add New Court</h5>
      <button class="btn-close" (click)="toggleSidebar()">Ã—</button>
    </div>
    <div class="ios-sidebar-body">
      <form (ngSubmit)="submitCourtForm()">
        <div class="form-group">
          <label for="courtid">Court ID</label>
          <input type="number" id="courtid" class="form-control" [(ngModel)]="newCourt.id" name="id" required>
        </div>
        <div class="form-group">
          <label for="courtName">Court Name</label>
          <input type="text" id="courtName" class="form-control" [(ngModel)]="newCourt.name" name="name" required>
        </div>
        <div class="form-group">
          <label for="courtDate">Date</label>
          <input type="text" id="courtDate" class="form-control" [(ngModel)]="newCourt.date" name="date" required>
        </div>
        <div class="form-group">
          <label for="courtTime">Time</label>
          <input type="text" id="courtTime" class="form-control" [(ngModel)]="newCourt.time" name="time" required>
        </div>
        <div class="form-group">
          <label for="courtLevel">Level</label>
          <input type="text" id="courtLevel" class="form-control" [(ngModel)]="newCourt.level" name="level" required>
        </div>
        <div class="form-group">
          <label for="courtNo">Court No</label>
          <input type="number" id="courtNo" class="form-control" [(ngModel)]="newCourt.court_no" name="court_no" required>
        </div>
        <div class="form-group">
          <label for="maxPlayers">Max Players</label>
          <input type="number" id="maxPlayers" class="form-control" [(ngModel)]="newCourt.max_players" name="max_players" required>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Submit</button>
      </form>
    </div>
  </div>

  <!-- Sidebar Toggle Button -->
  <button class="btn btn-primary ios-sidebar-toggle" (click)="toggleSidebar()" *ngIf="canAddCourt">
    Add New Court
  </button>
</div>
